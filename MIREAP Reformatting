Required files for mireap : 
mireap.pl -i <smrna.fa> -m <map.txt> -r <reference.fa> -o <outdir>

The map.txt file can be generated from the mapping.arf file:
> awk '{print $1'\t'$6'\t'$8'\t'$9'\t'$11}' mapping.arf > map.txt

Containing read_ID, chr_ID, start, end, strand(+/-). 

######################

The collapsed mapped smRNA reads file generated by mapper.pl looks like this:
>seq_0_x14029989
TCGGTGGGACTTTCGTTCGATT
>seq_14029989_x9481962
AACCCGTAGATCCGAACTTGTG
>seq_23511951_x8078382
TGACTAGATCCACACTCATCC
>seq_31590333_x6357181
TGCCCTATCCGTCAGTCGCTGC
>seq_37947514_x4356832
TGGACGGAGAACTGATAAGGGC

To work for MIREAP, you need to split the read count from the seq_id string.
The read count occurs after 'x' and can easily insert a whitespace. 

> sed -i 's/x/x /g' smRNA_collapsed.fa

>seq_0_x 14029989
TCGGTGGGACTTTCGTTCGATT
>seq_14029989_x 9481962
AACCCGTAGATCCGAACTTGTG
>seq_23511951_x 8078382
TGACTAGATCCACACTCATCC
>seq_31590333_x 6357181
TGCCCTATCCGTCAGTCGCTGC
>seq_37947514_x 4356832
TGGACGGAGAACTGATAAGGGC
>seq_42304346_x 3284556
GCTTCGGCCTCGGCTGCTC

Now read count can be read by MIREAP, and seq_ids are conserved. 

#######################

>head map.txt
seq_244718376_x52	AY509253.2	161202	161218	+
seq_244958036_x50	AY509253.2	136834	136857	-
seq_245416228_x47	AY509253.2	128123	128144	+
seq_245534198_x47	AY509253.2	166836	166855	+


For the map.txt file to work we must strip the read count from the seq_id line. 
i.e delete characters after 'x':

>sed 's/x.*/x/' map.txt > col1.txt
>head col1.txt
seq_244718376_x
seq_244958036_x
seq_245416228_x
seq_245534198_x
seq_245636839_x
seq_245801810_x
seq_246006199_x

col1.txt now cotains seq_id with no read count info. Insert this column into 'map.txt' 
in the place of column 1 (original seq_id, with read count). 

>awk 'FNR==NR{a[NR]=$1;next}{$1=a[FNR]}1' col1.txt map.txt > mireap_map.txt

seq_244718376_x AY509253.2 161202 161218 +
seq_244958036_x AY509253.2 136834 136857 -
seq_245416228_x AY509253.2 128123 128144 +

now make the separator field '\t'.. 

> rm [ACC]_map.txt
>tr ' ' '\t' < mireap_map.txt > [ACC]_map.txt
>rm mireap_map.txt
>rm col1.txt

######################

MIREAP WAS RUN LOCALLY 

######################


